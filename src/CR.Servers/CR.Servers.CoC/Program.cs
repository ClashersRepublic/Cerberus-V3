using System;
using System.Drawing;
using System.IO;
using System.Reflection;
using System.Text;
using System.Threading;
using CR.Servers.CoC.Core;
using CR.Servers.Core.Consoles;
using CR.Servers.Extensions.Binary;
using CR.Servers.Extensions.List;
using Microsoft.Extensions.Configuration;


namespace CR.Servers.CoC
{
    internal class Program
    {
        private const int Width = 140;
        private const int Height = 30;
        public static IConfigurationRoot Configuration { get; set; }

        private static void Main()
        {

            Configuration = new ConfigurationBuilder().SetBasePath(Directory.GetCurrentDirectory()).AddJsonFile("Config.json").Build();
            Console.Title =  $"Clashers Republic - {Assembly.GetExecutingAssembly().GetName().Name} - {DateTime.Now.Year} ©";

            Console.SetOut(new Prefixed());
            Console.SetWindowSize(Width, Height);

            Servers.Core.Consoles.Colorful.Console.WriteWithGradient(@"
            _________.__                 .__                          __________                   ___.   .__.__        
            \_   ___ \|  | _____    _____|  |__   ___________  ______ \______   \ ____ ______  __ _\_ |__ |  | |__| ____  
            /    \  \/|  | \__  \  /  ___/  |  \_/ __ \_  __ \/  ___/  |       _// __ \\____ \|  |  \ __ \|  | |  |/ ___\ 
            \     \___|  |__/ __ \_\___ \|   Y  \  ___/|  | \/\___ \   |    |   \  ___/|  |_> >  |  / \_\ \  |_|  \  \___ 
             \______  /____(____  /____  >___|  /\___  >__|  /____  >  |____|_  /\___  >   __/|____/|___  /____/__|\___  >
                    \/          \/     \/     \/     \/           \/          \/     \/|__|             \/             \/ 
                                                                                                           Clash Edition
            ", Color.OrangeRed, Color.LimeGreen, 14);

            Console.ForegroundColor = ConsoleColor.White;
            Console.WriteLine(Environment.NewLine);
            Console.WriteLine(@"Clashers Republic's programs are protected by our policies, available only to our partner.");
            Console.WriteLine(@"Clashers Republic's programs are under the 'Proprietary' license.");
            Console.WriteLine(@"Clashers Republic is NOT affiliated to 'Supercell Oy'.");
            Console.WriteLine(@"Clashers Republic does NOT own 'Clash of Clans', 'Boom Beach', 'Clash Royale'.");
            Console.WriteLine();
            Console.WriteLine(Assembly.GetExecutingAssembly().GetName().Name + " is now starting..." +  Environment.NewLine);

            var bytee = "00 00 0B E1 83 36 00 00 78 9C BD 5B EB 72 DB B8 15 7E 17 FE D6 76 88 0B 41 D2 FF 76 9D 6C EB D6 9B 64 D6 6E DA E9 4E 86 43 53 94 C4 0D 4D 6A 48 4A 4E D6 E3 17 E8 EF F6 19 DA 69 DF A0 EF D3 E9 3E 46 71 23 85 03 40 A4 A6 D9 69 1C 47 E2 C1 87 43 E0 5C BE 03 82 C8 73 50 97 C7 B2 0E AE 9E 83 A7 FC 58 66 CD E1 31 B8 42 AB A0 FC B4 CF 8E 65 27 BF AF AB AE 2C 06 1C 5C 0D DD A1 5C 05 79 31 54 1C 59 E7 9F DB C3 10 5C 85 52 92 D5 58 7E 55 D2 AC 1F F2 A1 0C AE 7E 08 57 E0 E7 03 04 E0 39 44 D1 B6 F5 BA 7D 6A BC 98 87 43 55 AF AB 66 DB F3 56 7E D9 3E 70 7D 45 5D EA CB A1 CB F7 FA EB BA 2C 5A FD F5 D8 3E FC A8 BF 76 65 BF CF 9F 9A F7 79 D7 8B 99 F7 1C D4 AC FB 6F BB F6 F1 36 EF 87 EF 55 AB 9C 8F 46 DE 95 E5 5A 5E 8F 77 BA AE CB BC BB 6E 0F CD 20 8C C4 1B 86 EA B1 CC 86 36 DB 96 8F 0F ED A7 6C DD B5 FB 93 BC 6A 46 F9 BE EC AA 56 A8 7A 59 05 87 A6 1A E4 FD C5 97 6C DF 09 F9 F3 0B 6F E8 F7 65 5D 7B 5B A6 79 0B D3 3D 07 EB 7C C8 B9 8B 42 FE 87 D0 55 50 71 58 14 EA 3F DC 90 47 EE 57 BC 0A 3E F1 7F A3 55 F0 99 7F E0 97 15 EC 45 60 2F A4 7B F1 DE 4F 37 EA E3 8F F2 83 EB 20 48 E9 48 17 74 E0 19 1D 38 BD 4C 07 99 1B 07 B9 4C 07 9D D3 11 5E A6 23 9A D3 81 2F D3 C1 E6 74 50 A5 83 2D E8 88 2F D0 41 17 74 24 17 E8 48 16 74 A4 17 E8 88 E6 75 A0 F0 02 1D B1 AD 23 82 3A 8C 38 15 51 35 46 A6 CC D7 4C A4 5C 70 45 09 0E 91 A5 86 86 50 0D 06 49 32 3A 14 AD 40 DE 05 8A 11 A5 68 F8 BC 2F 45 F2 DA 7A 61 F2 21 02 86 37 06 9B 63 98 14 F6 32 02 B6 6E 8B 8F 82 71 14 E3 72 1D 48 05 3D B1 83 2D B2 8C 1B CD E8 A0 4A 07 B2 03 85 32 A8 83 79 8D 6B 8F 9E 62 D8 2B 86 BD F4 BD B8 AE C3 1E 2B F6 82 93 8F 61 F7 C4 DB 7D D1 A3 51 02 D5 A4 33 F3 67 7A FA 40 A7 EC 35 3F 35 1C 82 B1 89 A1 CA 9C 3D 37 35 8A 60 F7 31 58 11 A0 E2 85 94 C7 B3 34 AA 74 90 05 3A C7 73 34 8A E3 CB 74 CC D1 A8 76 D3 A2 8E 39 1A C5 EC 32 1D 73 34 8A E9 65 3A 66 69 54 C7 79 B8 A0 63 96 46 C9 65 3A E6 68 74 2C 91 0B 3A C8 2C 8D E2 CB 74 CC 96 FB D0 AF 83 C2 8C 23 18 26 2E 9B 12 37 1F F8 4A E9 63 F6 D8 AE 79 9E 6D F2 BA 2F 81 8C 2F 91 F2 CD E0 6D 79 CA BB F3 3D CE B5 62 7F 17 AF 98 F8 B1 5E 31 F5 63 BD E2 C8 8F F5 8B 8B 5D 5E FB F1 67 5B F2 AE 7B 9A B1 8C D1 FC 62 AE 8A CD C5 62 02 09 8E 28 2F 9A D1 4B 0C 8F 2B 74 0A D1 8A C7 48 E2 94 6A 89 8E 42 88 D6 B5 55 B3 CD 12 9A 98 CB 00 B6 00 A6 2A E4 12 87 50 BD E8 48 A9 96 60 8A EC 39 22 08 66 46 C5 20 B6 66 1B 1C AB BA A0 A7 98 2C A0 13 93 B2 CC D5 A3 17 9D AA D2 AD C8 89 D0 79 34 0A CD 42 BF A0 1A 21 93 F7 6C C7 D8 60 E5 46 A4 0A 4F B4 00 56 5E 8C 2F 52 AC 9C 88 42 BD 5E 58 40 9B 4E 24 4B 13 54 4E 44 DA 8B 64 01 1D 03 4B 2F 78 11 25 66 A0 12 C7 20 31 44 A7 60 01 86 E7 D1 38 34 E3 9A 2E A1 95 1B 11 F2 27 98 8D 56 7E 4C 9D 47 06 2F 58 F9 51 CD D1 31 08 64 05 AC FC A8 17 26 4E 7A 59 E0 C8 5C 49 39 9C C0 20 98 99 A1 E7 32 88 85 56 6E 24 A9 DF D4 36 3A 31 8D 87 6D E6 8B 22 88 56 6E C4 E1 19 DD D0 7A 24 34 2D 62 9B CF 06 23 23 B0 F1 92 66 9D 8C D4 9B E6 36 98 98 04 6C 7B DC 06 2B 2F 52 A5 19 39 B6 B6 D0 91 19 D6 0E 39 D9 68 66 D2 24 75 6C 6D A1 63 D3 D6 8E 45 18 4C 47 92 98 29 E3 C4 08 83 F5 8E A4 E6 4A CB 49 5E 0B 4D 35 A9 62 7F CE D8 68 64 D2 BB A3 1A D6 24 8A 41 F8 39 C3 B6 D0 C4 44 53 9B CF 6C 34 70 A5 33 6A 0B 1C 19 B4 80 1C D7 C0 EC A5 CC A0 77 B7 FE 5B E0 D8 64 EC 25 70 62 06 B6 33 43 1B 9D 9A CB 16 A7 A4 5B E8 28 04 F6 70 82 D5 42 23 33 B4 9D 2A 6D A3 95 1F A9 0A D6 85 61 47 CA 8D 18 7B 69 D5 06 53 93 29 97 34 9B D5 D1 25 33 0B CC CC 40 A5 76 A4 5A 44 19 69 37 EA E5 FD 12 3A 31 A7 E8 12 83 85 4E CD 87 5A 97 18 20 9A 85 66 F4 2D F0 3B 43 66 A6 BB 8C 9D 40 34 06 4F 3E 4B 68 62 0E 1B 39 93 B4 D0 DA 91 7A 24 0B 6E 67 91 B9 74 71 73 0C B2 1F 03 CC EA 30 D4 69 8F 48 A1 63 33 A4 9C 64 3F ED 65 29 34 58 AE 22 27 C9 AC 91 A4 60 8B C4 D6 CD E0 48 62 B0 C3 E4 04 95 8D 46 66 50 2D A2 31 D8 48 72 F8 0F CE 32 06 39 E9 CC D2 46 53 30 6E 07 6D 8D 24 02 23 71 C6 6D E9 66 60 24 F6 7A D8 46 C7 20 AA 9C 2A 69 A1 13 80 76 0A 88 85 4E C1 2C 9D 91 C0 0A 92 C4 26 05 3A 68 EB 61 2C 49 C0 AA DF E1 35 18 55 49 6A AC 43 5D D5 D0 DC A9 C9 0F CE 0A C6 5A 37 A4 C8 DC 19 5C 58 69 A7 D8 5C 08 20 A7 26 C0 84 4F E1 BA 6B 21 00 53 0A 96 96 0B 01 98 46 00 BD 10 52 29 0C 29 87 5F AD 71 C7 E6 72 7B 51 77 02 82 DB A1 07 4B 77 0A 9E 55 1C B7 03 34 1A B7 25 92 33 4B 40 0A D1 08 84 EB 3C F5 20 BD D1 30 5A 70 09 0D AA F0 42 E2 A0 10 26 FC D2 B8 19 D0 ED C4 89 35 92 18 D0 F1 D2 48 60 C2 2F E9 4E 81 EE F9 88 45 08 6C 45 2F 8D 44 6F 36 8C 36 71 EC 6D A1 31 D8 4C 24 2F E3 4B 5D F0 DA 13 87 A1 DA C5 50 3D E5 56 FE F4 DE 33 54 3D D6 A7 6F E3 86 E3 74 2D 37 12 61 2B 94 61 B3 D9 B8 20 A6 DC B8 A0 A6 DC B8 88 4C B9 71 C1 4C B9 71 11 9B F2 D8 DA 18 26 E1 CB F8 5E 1B 1B 2F B6 4D CB 90 54 5A 62 B2 4C 62 5B E6 B4 C6 8E 0C BF E9 6E 04 76 83 AF DA D4 18 22 26 C6 70 C4 E2 F5 79 A8 BE 8C 2F C8 8F B8 28 CC D7 E2 DB BE 2C A6 6F 1A 33 BE DA D7 6F E3 9B F2 E9 6E D7 EE BF 31 DE E9 93 55 B8 8A 57 74 C5 F8 2F 5D 21 FE 19 AF 30 2F A4 54 FE 84 F2 37 94 9F 68 45 F4 2F 5A 61 F9 83 64 0B 5E 51 05 41 D3 EF 08 83 F2 D3 95 3A 5A A0 47 73 AF CF 10 30 7E EF 48 36 46 F2 93 E8 FB 84 F2 17 9D 3A BC D2 27 0D 90 1C 9C B8 8F 1A FA 97 FC 50 AD 83 27 99 18 3C 96 03 6C 37 1B 61 DC 67 F5 45 DA F0 45 9C 9A E8 87 AC 2E F3 ED A1 CC BA BC F9 A8 4F 63 70 61 5E D7 55 DE 14 65 A6 4F 7A 20 08 EE 77 87 CD A6 2E 4F F8 BE CC FB B6 E1 1F 65 13 5C 7D 35 A2 F9 2C 7B 43 C6 F3 24 1B 0E 43 DB 55 79 3D CA 43 25 7E C8 7B 63 C3 BF EB 32 8F F0 F1 73 D6 E4 8F F2 BC 46 10 AC C6 BF 1F C4 51 12 19 3D D9 A6 CE B7 2A B8 1E 78 B0 E8 C3 26 59 B9 AE F8 F8 76 3C 74 B2 B2 33 35 F2 99 35 E2 2C C5 0F 71 C2 95 08 BD E2 80 85 DA 21 57 C6 12 B7 0B AE 82 FF FC EB 1F FF FE DB 5F BE FA F9 EF FF FC F9 AF 7F E6 F7 9C 8C A3 DB 1F BA B6 A7 94 F2 96 87 7C BD 2D 33 91 09 28 C2 2C 26 14 89 A5 F0 84 17 07 64 0C 83 2A 5B AA D7 C3 9C A2 F3 23 CF A8 8E F7 CE 76 D5 76 A7 EA CC 49 56 B7 4F A2 9E B1 28 4E D8 74 0C 84 67 AF B8 D9 C4 62 45 33 C8 59 98 62 E4 17 63 BF 98 F8 C5 D4 2F 8E FC 62 E6 17 C7 7E 71 A2 C5 C8 92 A7 5E 38 F2 4F 13 F9 A7 89 FC D3 44 A7 69 7E 38 1D 9D D1 D6 C4 0C 98 93 8C 3D B5 DC B9 91 96 3B 77 D2 F2 D4 BC 95 3C 10 70 D8 6F BB 7C 5D 9E F3 1F F5 FB 8F FA FD 87 FD FE A3 7E FF 51 BF FF A8 DF 7F D4 EF 3F EC F7 1F 14 13 E4 17 8F E3 46 93 E5 5D 7B 58 1E A0 67 3C 60 7B 06 4F 72 75 5C AB 3D 74 85 A1 95 80 CE 2C 45 49 3C 69 20 40 01 22 8C 37 5B 8D A3 65 31 41 09 83 4D 4E 76 4C 2F 8F 7C 62 27 3B A6 17 42 EA E6 69 CC 28 6C 1A 2D 1C 13 9C 46 62 72 13 A3 8C 3C C0 65 BB B2 6B D5 11 39 C3 90 53 15 3F 19 46 E2 76 65 5E 0F BB 73 B8 70 C2 69 D7 9C 03 B2 09 28 DE 28 8E 67 E6 72 4E F0 0F B5 69 F9 D8 EF 4F 2D 77 32 4A CB 9D 8C D2 F2 D1 13 88 A6 09 4D 48 1C 47 16 C0 89 76 2D 8F A6 D8 83 72 D7 23 31 74 09 BF 51 C4 10 36 E2 25 06 5C 64 29 44 F8 8C 9C 9C 91 4F 03 8E 43 8A 12 6B 18 28 32 86 11 63 C2 43 D3 02 C4 67 D4 26 67 E4 A9 99 83 32 84 30 E4 22 E2 27 9D 29 79 2D B1 BF 68 10 7F D1 20 FE A2 41 FC 45 83 F8 8B 06 49 FC 62 7F CD A0 FE 9A 41 FD 35 83 FA 6B 06 F5 CF 92 52 33 69 0A BE EC A9 F9 AA 49 2C 7E C9 74 39 B4 83 78 39 2F 1E 7B B4 E4 D0 8F CB 5A 03 91 F5 7B B9 30 30 30 52 24 16 C2 62 F9 B2 E3 69 AF 54 73 A3 0C BB EC 88 B3 F1 24 5A 5F B4 5D 29 22 44 4C 75 7D 28 B9 2E 25 C1 E2 B5 1A 5F F9 6F CA 66 0D 16 35 37 CD A6 E2 9E 2F 3D EB 99 C0 5A 9B 84 EE DA 44 44 B2 B3 36 E1 F1 2D B6 3B 0C 4E 9A 2A AB A7 F4 F9 E8 7F 86 B7 1D 17 42 3A B7 C4 2E 75 00 E6 B0 C4 BF 2C 7F B3 94 21 D8 94 80 A6 2F E1 EF 15 90 9F 0A E1 A5 BC EE EF 7F 31 DF A3 73 1A 92 5F A4 10 9C 23 FC 25 DE B6 E5 06 6F C7 31 E3 35 C2 66 54 C7 A0 5F C8 DB 33 8C 1D 31 8C 10 B3 2A 14 3A 53 71 90 B3 C4 FA 9F 98 FC FF 47 44 E9 39 22 4A C5 3E 28 20 22 B1 9B 19 70 16 CA 86 AA E0 4F 9A 4C EC 05 8B F3 94 3C E4 1F F7 AA B8 31 1A 11 B1 3B 5D 3C AE 65 C8 14 62 CD 23 A3 45 10 97 7A 1C 7C 0E 44 E0 D0 44 B0 9A 51 96 C4 EE 04 91 6F 72 E4 06 24 61 EA BC ED 79 0D 11 FB 52 0D 62 95 F6 65 1A C4 7A 62 51 83 74 66 CD 0D 97 4B FA 9E 9E 5A 55 1C 88 ED F9 23 7F A2 AF DA 46 BA EC 58 F5 15 4F B9 7B 79 50 35 E0 94 1C 87 0C 93 FB 50 86 CB AF F8 EF 9F 38 BB 73 93 77 03 84 24 16 84 DF 0F 00 48 68 01 F8 23 B6 F8 CF 09 AF 9B A1 FB AC 6A 86 1C 99 BC 7E A3 EA C8 9D A0 F7 57 55 2F 9F CE 7F 7B E0 5E 5E 05 55 33 76 BA 51 71 D7 B4 43 B5 A9 8A 7C 90 33 08 EE 6F 5E 65 B7 6F AF BF BE CD DE BC BD BF F9 F6 E6 FA EB FB 9B B7 6F B2 D7 EF 5F BF B9 CF EE DE BD BE BD CD 5E DD DC 5D BF FD FD 9B 7B A1 ED 31 DF EA 8A D5 17 BA 72 B5 DC 5A D5 4F A3 3E 2E D9 1C 9A 42 5C 29 A3 35 9E B1 71 D0 3E EF 78 C3 A0 F6 46 02 F5 40 81 62 DE 80 C2 E0 C3 8B F8 59 05 DB BA 7D C8 D5 FF B1 F8 B5 F1 B5 DA 0C EF F2 E2 E3 EB 4F 43 D9 F4 FA AE 1C FD BE AA 6B 3E 3A 24 30 FC 6E 45 95 D7 6F F5 E1 3A 88 10 C7 81 83 7B 9E 57 BF E1 69 F5 5D FE E9 56 ED 10 F0 20 B8 13 A9 73 BD CB 9B 6D F9 6D DB DD B6 7D D5 6C E5 24 DE 95 BC 42 36 83 9C 3C B7 E1 77 15 27 D9 A1 6D 4A 4D 28 66 33 81 ED 3C D4 6C 84 78 03 6C 20 12 17 11 43 1D 62 13 D5 86 24 50 09 62 2E 24 85 10 B1 13 6B 43 E4 F6 BD 89 11 C3 E5 09 70 37 74 65 B3 1D 76 DF 6B 53 DC 29 4E B1 2C 91 2C 98 C2 6A F7 CC C2 BE BF C7 5A 08 43 88 67 A2 88 86 4B 16 45 CC 32 A9 CF 18 C9 B2 D9 B1 35 60 E4 19 31 B5 31 9E 21 33 1B E3 1B 73 68 7B C7 EF 41 5B 95 90 C8 FC F9 1D 8F F7 BB A7 6A 28 76 A5 CC 9C 6F F2 81 97 97 3F E4 D5 C0 5D FA AE 6B 7F 2C 79 9E D6 E5 2B DE B3 3B 14 2A 81 D5 C1 54 DE 79 DF 95 FB AC FF 58 ED E5 FE F3 7F 01 6B 36 8D 4E 00 00 02 71 00 00 00 04 00 00 02 BC 00 00 33 00 00 00 3C 00 00 3D 09 20 00 00 01 C0 00 00 02 BC 00 00 33 00 00 00 3C 00 00 3D 09 20 00 00 01 C8 00 00 02 BC 00 00 33 00 00 00 3C 00 00 3D 09 20 00 00 01 D0 00 00 02 BC 00 00 33 00 00 00 3C 00 00 3D 09 20 00 00 01 D9 00 00 00 08".Replace(" ","").HexaToBytes();
            var reader = new Reader(bytee);
            Console.WriteLine(reader.ReadZlibStream());
            Console.WriteLine(reader.ReadInt32());
            var data = reader.ReadFully();
            Console.WriteLine(BitConverter.ToString(data).Replace("-", ""));
            Console.WriteLine(Encoding.UTF8.GetString(data));
            Resources.Initialize();
            Thread.Sleep(-1);
        }
    }
}
